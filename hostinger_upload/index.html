<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ø§ÙØ±Ø¯Ùˆ Ø§Û’ Ø¢Ø¦ÛŒ - Ø§Ø±Ø¯Ùˆ Ø²Ø¨Ø§Ù† Ú©Ø§ Ù¾ÛÙ„Ø§ Ø§Û’ Ø¢Ø¦ÛŒ Ú†ÛŒÙ¹ Ø¨Ø§Ù¹">
    <title>Ø§ÙØ±Ø¯Ùˆ Ø§Û’ Ø¢Ø¦ÛŒ</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;600;700&family=Inter:wght@300;400;500;600&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="light-mode">
    <div class="app-container" role="application">
        <!-- Sidebar -->
        <aside class="sidebar" role="complementary" aria-label="Ø³Ø§Ø¦ÚˆØ¨Ø§Ø±">
            <div class="sidebar-header">
                <button class="hide-toggle-btn" title="Collapse Sidebar" aria-label="Ø³Ø§Ø¦ÚˆØ¨Ø§Ø± Ú©Ùˆ Ú†Ú¾Ù¾Ø§Ø¦ÛŒÚº">
                    <i class="fas fa-chevron-right" aria-hidden="true"></i>
                </button>
                <button class="new-chat-btn" aria-label="Ù†ÛŒØ§ Ú†ÛŒÙ¹ Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº">
                    <i class="fas fa-plus" aria-hidden="true"></i>
                    <span>Ù†ÛŒØ§ Ú†ÛŒÙ¹</span>
                </button>
            </div>
            
            <div class="sidebar-content">
                <!-- Chat History -->
                <div class="chat-history">
                    <h3 class="history-title">Ú¯ÙØªÚ¯Ùˆ Ú©ÛŒ ØªØ§Ø±ÛŒØ®</h3>
                    <ul class="chat-list">
                        <li class="chat-item active">
                            <i class="fas fa-comment"></i>
                            <span>Ù†Ø¦ÛŒ Ú¯ÙØªÚ¯Ùˆ</span>
                        </li>
                    </ul>
                </div>
                
                <!-- Feature Showcase -->
                <div class="feature-showcase">
                    <h3 class="showcase-title">Ø§ÙØ±Ø¯Ùˆ Ø§Û’ Ø¢Ø¦ÛŒ Ú©ÛŒ Ø®ØµÙˆØµÛŒØ§Øª</h3>
                    <ul class="feature-list">
                        <li class="feature-item">
                            <i class="fas fa-language"></i>
                            <span>Ø§Ø±Ø¯Ùˆ Ø§ÙˆØ± Ø§Ù†Ú¯Ø±ÛŒØ²ÛŒ Ù…ÛŒÚº Ø¨Ø§Øª Ú†ÛŒØª</span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-brain"></i>
                            <span>Ù…ØµÙ†ÙˆØ¹ÛŒ Ø°ÛØ§Ù†Øª Ù¾Ø± Ù…Ø¨Ù†ÛŒ Ø¬ÙˆØ§Ø¨Ø§Øª</span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-book"></i>
                            <span>Ø§Ø±Ø¯Ùˆ Ø§Ø¯Ø¨ Ø§ÙˆØ± Ø«Ù‚Ø§ÙØª Ú©ÛŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</span>
                        </li>
                        <li class="feature-item">
                            <i class="fas fa-graduation-cap"></i>
                            <span>ØªØ¹Ù„ÛŒÙ…ÛŒ Ù…Ø¯Ø¯ Ø§ÙˆØ± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</span>
                        </li>
                    </ul>
                </div>
                
                <!-- Login Prompt -->
                <div class="login-prompt">
                    <h3>Ø§ÙØ±Ø¯Ùˆ Ø§Û’ Ø¢Ø¦ÛŒ</h3>
                    <p>Ú©Ø³ÛŒ Ø¨Ú¾ÛŒ Ù…ÙˆØ¶ÙˆØ¹ Ù¾Ø± Ø³ÙˆØ§Ù„ Ù¾ÙˆÚ†Ú¾ÛŒÚºØŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ø§ØµÙ„ Ú©Ø±ÛŒÚºØŒ ÛŒØ§ Ù…Ø¯Ø¯ Ø·Ù„Ø¨ Ú©Ø±ÛŒÚº</p>
                    <div class="about-urduai">
                        <p>ÛŒÛ Ú†ÛŒÙ¹ Ø¨Ø§Ù¹ Urdu Ai Ú©ÛŒ Ø·Ø±Ù Ø³Û’ Ø¨Ù†Ø§ÛŒØ§ Ú¯ÛŒØ§ ÛÛ’Û” Ø¬Ø³ Ú©Ø§ Ù…Ù‚ØµØ¯ Ø¹Ø§Ù… Ø¯ÙˆØ³ØªÙˆÚº Ú©Ùˆ ÛŒÛ Ø¨ØªØ§Ù†Ø§ ÛÛ’ Ú©Û Ø§Ø¨ Ø§Û’ Ø¢Ø¦ÛŒ Ù†Û’ Ú©Ø³ Ù‚Ø¯Ø± Ø¢Ø³Ø§Ù†ÛŒ Ú©Ø±Ø¯ÛŒ ÛÛ’Û” ÛŒÛ Ø³Ø§Ø±ÛŒ ÚˆÙˆÙ„Ù¾Ù…Ù†Ù¹ Ø§ÛŒÚ© Ø¢Ø±Ù¹ Ø³Ù¹ÙˆÚˆÙ†Ù¹ Ù†Û’ Ú©ÛŒ ÛÛ’Û” Ø¬Ø³ Ú©Û’ Ù¾Ø§Ø³ Ú©Ù…Ù¾ÛŒÙˆÙ¹Ø± Ú©ÛŒ Ø¬Ø¯Ø¯ÛŒØ¯ ØªØ¹Ù„ÛŒÙ… Ù†ÛÛŒÚº</p>
                        <p class="mission-statement">urduai.org Ú©Ø§ Ù…Ù‚ØµØ¯ Ø§Û’ Ø¢Ø¦ÛŒ Ú©Ùˆ Ø¢Ø³Ø§Ù† Ø§Ù„ÙØ§Ø¸ Ù…ÛŒÚº Ø¹Ø§Ù… Ù„ÙˆÚ¯ÙˆÚº ØªÚ© Ù¾ÛÙ†Ú†Ø§Ù†Ø§ ÛÛ’Û”</p>
                        <a href="https://www.urduai.org" class="main-website-link" target="_blank" rel="noopener noreferrer">
                            <div class="main-website-promo">
                                <div class="promo-logo">
                                    <span class="logo-text">Ø§ÙØ±Ø¯Ùˆ</span>
                                    <span class="logo-ai">Ø§Û’ Ø¢Ø¦ÛŒ</span>
                                </div>
                                <div class="promo-content">
                                    <h4>ÛÙ…Ø§Ø±ÛŒ Ù…Ú©Ù…Ù„ ÙˆÛŒØ¨ Ø³Ø§Ø¦Ù¹ Ø¯ÛŒÚ©Ú¾ÛŒÚº</h4>
                                    <p>Ù…Ø²ÛŒØ¯ Ø®ØµÙˆØµÛŒØ§ØªØŒ Ù¹ÛŒÙˆÙ¹ÙˆØ±ÛŒÙ„Ø² Ø§ÙˆØ± Ø§Û’ Ø¢Ø¦ÛŒ Ù¹ÙˆÙ„Ø² Ú©Û’ Ù„ÛŒÛ’</p>
                                    <span class="visit-site-btn">ÙˆÛŒØ¨ Ø³Ø§Ø¦Ù¹ Ù…Ù„Ø§Ø­Ø¸Û Ú©Ø±ÛŒÚº <i class="fas fa-external-link-alt"></i></span>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="sidebar-footer">
                <div class="social-links">
                    <a href="https://www.facebook.com/urduaiorg" class="social-link" title="Facebook" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://twitter.com/urduaiorg" class="social-link" title="Twitter" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://www.instagram.com/urduaiorg" class="social-link" title="Instagram" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://www.youtube.com/channel/urduaiorg" class="social-link" title="YouTube" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-youtube"></i>
                    </a>
                </div>
                
                <div class="language-toggle">
                    <button class="lang-btn active">Ø§Ø±Ø¯Ùˆ</button>
                    <button class="lang-btn">English</button>
                </div>
                
                <div class="theme-toggle">
                    <button class="theme-btn" title="Toggle Dark Mode">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content" role="main">
            <header class="main-header" role="banner">
                <button class="mobile-menu-btn" title="Toggle Mobile Menu" aria-label="Ù…ÙˆØ¨Ø§Ø¦Ù„ Ù…ÛŒÙ†Ùˆ Ø¯Ú©Ú¾Ø§Ø¦ÛŒÚº/Ú†Ú¾Ù¾Ø§Ø¦ÛŒÚº">
                    <i class="fas fa-bars" aria-hidden="true"></i>
                </button>
                <div class="logo" aria-label="Ø§ÙØ±Ø¯Ùˆ Ø§Û’ Ø¢Ø¦ÛŒ Ù„ÙˆÚ¯Ùˆ">
                    <span class="logo-text">Ø§ÙØ±Ø¯Ùˆ</span>
                    <span class="logo-ai">Ø§Û’ Ø¢Ø¦ÛŒ</span>
                </div>
                <button class="sidebar-toggle-btn" title="Toggle Sidebar" aria-label="Ø³Ø§Ø¦ÚˆØ¨Ø§Ø± Ø¯Ú©Ú¾Ø§Ø¦ÛŒÚº/Ú†Ú¾Ù¾Ø§Ø¦ÛŒÚº">
                    <i class="fas fa-chevron-right" aria-hidden="true"></i>
                </button>
                <button class="show-sidebar-btn" title="Expand Sidebar" aria-label="Ø³Ø§Ø¦ÚˆØ¨Ø§Ø± Ú©Ùˆ Ù¾Ú¾ÛŒÙ„Ø§Ø¦ÛŒÚº">
                    <i class="fas fa-bars" aria-hidden="true"></i>
                </button>
            </header>

            <div class="chat-container">
                <div class="welcome-screen" id="welcome-screen">
                    <div class="welcome-logo">
                        <div class="logo large-logo">
                            <span class="logo-text">Ø§ÙØ±Ø¯Ùˆ</span>
                            <span class="logo-ai">Ø§Û’ Ø¢Ø¦ÛŒ</span>
                        </div>
                    </div>
                    <h1 class="welcome-title">Ø§ÙØ±Ø¯Ùˆ Ø²Ø¨Ø§Ù† Ú©Ø§ Ù¾ÛÙ„Ø§ Ø§Û’ Ø¢Ø¦ÛŒ Ú†ÛŒÙ¹ Ø¨Ø§Ù¹</h1>
                    <p class="welcome-subtitle">Ø¹Ù„Ù…ØŒ Ø§Ø¯Ø¨ØŒ Ø«Ù‚Ø§ÙØªØŒ Ø³Ø§Ø¦Ù†Ø³ Ø§ÙˆØ± Ø¯ÛŒÚ¯Ø± Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ù¾Ø± Ø§Ø±Ø¯Ùˆ Ù…ÛŒÚº Ú¯ÙØªÚ¯Ùˆ Ú©Ø±ÛŒÚº</p>
                    
                    <div class="example-prompts">
                        <div class="prompt-card">
                            <h3>Ù…ØµÙ†ÙˆØ¹ÛŒ Ø°ÛØ§Ù†Øª</h3>
                            <button class="prompt-btn">Ù…ØµÙ†ÙˆØ¹ÛŒ Ø°ÛØ§Ù†Øª Ú©ÛŒØ§ ÛÛ’ Ø§ÙˆØ± ÛŒÛ Ú©ÛŒØ³Û’ Ú©Ø§Ù… Ú©Ø±ØªÛŒ ÛÛ’ØŸ</button>
                            <button class="prompt-btn">Ú†ÛŒÙ¹ Ø¬ÛŒ Ù¾ÛŒ Ù¹ÛŒ Ø§ÙˆØ± Ø§Ø±Ø¯Ùˆ Ø§Û’ Ø¢Ø¦ÛŒ Ù…ÛŒÚº Ú©ÛŒØ§ ÙØ±Ù‚ ÛÛ’ØŸ</button>
                        </div>
                        <div class="prompt-card">
                            <h3>Ø°Ø§ØªÛŒ ØªØ±Ù‚ÛŒ</h3>
                            <button class="prompt-btn">Ø§Ø±Ø¯Ùˆ Ù…ÛŒÚº Ù…Ø¤Ø«Ø± Ù…Ø·Ø§Ù„Ø¹Û Ú©Û’ Ø·Ø±ÛŒÙ‚Û’ Ú©ÛŒØ§ ÛÛŒÚºØŸ</button>
                            <button class="prompt-btn">Ú©Ø§Ù…ÛŒØ§Ø¨ Ù„ÙˆÚ¯ÙˆÚº Ú©ÛŒ Ø¹Ø§Ø¯Ø§Øª Ú©Û’ Ø¨Ø§Ø±Û’ Ù…ÛŒÚº Ø¨ØªØ§Ø¦ÛŒÚº</button>
                        </div>
                        <div class="prompt-card">
                            <h3>Ø¹Ù…ÙˆÙ…ÛŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</h3>
                            <button class="prompt-btn">Ù¾Ø§Ú©Ø³ØªØ§Ù† Ú©ÛŒ Ù…Ø´ÛÙˆØ± Ø´Ø®ØµÛŒØ§Øª Ú©ÙˆÙ† ÛÛŒÚºØŸ</button>
                            <button class="prompt-btn">Ø§Ø±Ø¯Ùˆ Ø²Ø¨Ø§Ù† Ú©ÛŒ ØªØ§Ø±ÛŒØ® Ú©ÛŒØ§ ÛÛ’ØŸ</button>
                        </div>
                    </div>
                </div>
                
                <div class="chat-messages" id="chat-messages">
                    <!-- Messages will be added here dynamically -->
                </div>
                
                <div class="chat-input-wrapper">
                    <form id="chat-form" aria-label="Ú†ÛŒÙ¹ ÙØ§Ø±Ù…">
                        <div class="chat-input-container">
                            <textarea 
                                id="chat-input" 
                                placeholder="...Ø§Ù¾Ù†Ø§ Ø³ÙˆØ§Ù„ Ù¾ÙˆÚ†Ú¾ÛŒÚº" 
                                rows="1"
                                aria-label="Ø§Ù¾Ù†Ø§ Ø³ÙˆØ§Ù„ ÛŒÛØ§Úº Ù„Ú©Ú¾ÛŒÚº"
                            ></textarea>
                            <button type="submit" class="send-btn" id="send-button" title="Send Message" aria-label="Ù¾ÛŒØºØ§Ù… Ø¨Ú¾ÛŒØ¬ÛŒÚº">
                                <i class="fas fa-paper-plane" aria-hidden="true"></i>
                            </button>
                        </div>
                    </form>
                    <p class="disclaimer" role="note">Ø§ÙØ±Ø¯Ùˆ Ø§Û’ Ø¢Ø¦ÛŒ Ú©Û’ Ø°Ø±ÛŒØ¹Û’ Ø¯ÛŒ Ú¯Ø¦ÛŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…ÛŒÚº ØºÙ„Ø·ÛŒØ§Úº ÛÙˆ Ø³Ú©ØªÛŒ ÛÛŒÚºÛ” Ø§ÛÙ… ÙÛŒØµÙ„ÙˆÚº Ú©Û’ Ù„ÛŒÛ’ ØªØµØ¯ÛŒÙ‚ Ú©Ø±ÛŒÚºÛ”</p>
                </div>
                
                <!-- Add diagnostic panel -->
                <div class="diagnostic-panel" style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px; border: 1px solid #e0e0e0;">
                    <h3 style="margin-top: 0; color: #4a148c;">Diagnostic Tools</h3>
                    <div style="margin-bottom: 15px;">
                        <button id="test-api-btn" style="background-color: #7b1fa2; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; margin-right: 5px; font-size: 0.875rem;">Test API Connection</button>
                        <button id="test-config-btn" style="background-color: #7b1fa2; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; margin-right: 5px; font-size: 0.875rem;">Test Config</button>
                        <button id="test-fetch-btn" style="background-color: #7b1fa2; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">Test Direct Fetch</button>
                    </div>
                    <div id="diagnostic-result" style="background-color: #f5f5f5; padding: 15px; border-radius: 5px; border: 1px solid #e0e0e0; white-space: pre-wrap; font-family: monospace; font-size: 14px; max-height: 200px; overflow-y: auto;">Run a test to see results here</div>
                </div>
            </div>
            
            <!-- Newsletter Signup -->
            <div class="newsletter-container">
                <div class="newsletter-content">
                    <h2>Ø§Û’ Ø¢Ø¦ÛŒ Ú©Û’ Ù…ØªØ¹Ù„Ù‚ ØªØ§Ø²Û Ø®Ø¨Ø±ÙˆÚº Ø³Û’ Ø¨Ø§Ø®Ø¨Ø± Ø±ÛÛŒÚº Ø§ÙˆØ± Ø¢Ø³Ø§Ù† Ø§Ù„ÙØ§Ø¸ Ù…ÛŒÚº Ù…ØµÙ†ÙˆØ¹ÛŒ Ø°ÛØ§Ù†Øª Ú©Ùˆ Ø¬Ø§Ù†ÛŒØ¦Û’Û”</h2>
                    <p class="newsletter-description">ÛÙ…Ø§Ø±Û’ Ù†ÛŒÙˆØ² Ù„ÛŒÙ¹Ø± Ú©Ùˆ Ø¬ÙˆØ§Ø¦Ù† Ú©Ø±ÛŒÚº Ø§ÙˆØ± Ø³ÙˆØ´Ù„ Ù…ÛŒÚˆÛŒØ§ Ù¾Ø± ÙØ§Ù„Ùˆ Ú©Ø±ÛŒÚº</p>
                    <form id="newsletter-form" class="newsletter-form" aria-label="Ù†ÛŒÙˆØ² Ù„ÛŒÙ¹Ø± Ø³Ø¨Ø³Ú©Ø±Ù¾Ø´Ù† ÙØ§Ø±Ù…">
                        <div class="form-group">
                            <input type="text" id="name" name="name" placeholder="Your Name" aria-label="Ø¢Ù¾ Ú©Ø§ Ù†Ø§Ù…" />
                        </div>
                        <div class="form-group">
                            <input type="email" id="email" placeholder="Your Email" name="email" required aria-label="Ø¢Ù¾ Ú©Ø§ Ø§ÛŒ Ù…ÛŒÙ„" aria-required="true" />
                        </div>
                        <button type="submit" id="submit-button" title="Subscribe to Newsletter" aria-label="Ù†ÛŒÙˆØ² Ù„ÛŒÙ¹Ø± Ø³Ø¨Ø³Ú©Ø±Ø§Ø¦Ø¨ Ú©Ø±ÛŒÚº">Ø³Ø¨Ø³Ú©Ø±Ø§Ø¦Ø¨ Ú©Ø±ÛŒÚº</button>
                    </form>
                    <div id="form-messages" role="status" aria-live="polite"></div>
                </div>
            </div>
            
            <!-- Footer -->
            <footer class="main-footer" role="contentinfo">
                <div class="footer-content">
                    <p>Urdu AI is a Wang Lab of Innovation (WALI) initiative - <a href="https://www.walipak.com" target="_blank" rel="noopener noreferrer" aria-label="WALI website">www.walipak.com</a></p>
                </div>
            </footer>
        </main>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="success-modal" role="dialog" aria-labelledby="success-modal-title" aria-hidden="true">
        <div class="modal-content newsletter-success">
            <span class="close-modal" id="close-modal" aria-label="Ø¨Ù†Ø¯ Ú©Ø±ÛŒÚº">&times;</span>
            <div class="success-icon">
                <div class="emoji-container">
                    <i class="fas fa-check-circle main-emoji" aria-hidden="true"></i>
                    <span class="floating-emoji" aria-hidden="true">âœ¨</span>
                    <span class="floating-emoji" aria-hidden="true">ğŸ‰</span>
                    <span class="floating-emoji" aria-hidden="true">ğŸ‘</span>
                    <span class="floating-emoji" aria-hidden="true">ğŸŒŸ</span>
                </div>
            </div>
            <h3 id="success-modal-title">Ø´Ú©Ø±ÛŒÛ!</h3>
            <p>Ø¢Ù¾ Ú©ÛŒ Ø³Ø¨Ø³Ú©Ø±Ù¾Ø´Ù† Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ø³Û’ Ø±Ø¬Ø³Ù¹Ø± ÛÙˆ Ú¯Ø¦ÛŒ ÛÛ’Û”</p>
        </div>
    </div>

    <!-- Login Modal (Placeholder) -->
    <div class="modal" id="login-modal">
        <div class="modal-content login-modal-content">
            <span class="close-modal close-login-modal">&times;</span>
            <h3>Ø¢Ù¾ Ú©ÛŒ Ø±Ø§Ø¦Û’</h3>
            <p>Ø§ÙØ±Ø¯Ùˆ Ø§Û’ Ø¢Ø¦ÛŒ Ú©Ùˆ Ø¨ÛØªØ± Ø¨Ù†Ø§Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ø¢Ù¾ Ú©ÛŒ Ø±Ø§Ø¦Û’ Ø§ÛÙ… ÛÛ’Û” ÛÙ…ÛŒÚº Ø¨ØªØ§Ø¦ÛŒÚº Ú©Û Ø¢Ù¾ Ú©Ùˆ Ú©ÛŒØ§ Ù¾Ø³Ù†Ø¯ Ø¢ÛŒØ§ Ø§ÙˆØ± Ú©ÛŒØ§ Ø¨ÛØªØ± ÛÙˆ Ø³Ú©ØªØ§ ÛÛ’Û”</p>
            <div class="feedback-form">
                <textarea placeholder="Ø§Ù¾Ù†ÛŒ Ø±Ø§Ø¦Û’ ÛŒÛØ§Úº Ù„Ú©Ú¾ÛŒÚº..." rows="4"></textarea>
                <button class="send-feedback-btn">Ø±Ø§Ø¦Û’ Ø¨Ú¾ÛŒØ¬ÛŒÚº</button>
            </div>
        </div>
    </div>

    <!-- Modal Overlay -->
    <div id="modal-overlay" class="modal-overlay"></div>

    <script src="js/main.js"></script>
    <script>
    // Add this script to ensure the API calls work correctly
    document.addEventListener('DOMContentLoaded', function() {
        // Override the API_BASE_URL to use the current origin
        window.API_BASE_URL = window.location.origin;
        
        // Add a console log to confirm this script is running
        console.log('API base URL set to current origin:', window.API_BASE_URL);
        
        // Add direct test functions that match the minimal-chat.html implementation
        const testApiBtn = document.getElementById('test-api-btn');
        const testConfigBtn = document.getElementById('test-config-btn');
        const testFetchBtn = document.getElementById('test-fetch-btn');
        const diagnosticResult = document.getElementById('diagnostic-result');
        
        if (testApiBtn) {
            testApiBtn.addEventListener('click', async function() {
                diagnosticResult.textContent = 'Testing API connection...';
                
                try {
                    // Use relative path exactly as in minimal-chat.html
                    const response = await fetch('/api/test-openai');
                    
                    if (!response.ok) {
                        throw new Error(`Server responded with status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    console.log('API test response data:', data);
                    
                    if (data.status === 'ok') {
                        diagnosticResult.textContent = 'API connection successful! ' + data.message + '\n\nResponse: ' + data.response;
                        diagnosticResult.style.backgroundColor = '#e8f5e9';
                        diagnosticResult.style.borderColor = '#66bb6a';
                    } else {
                        diagnosticResult.textContent = 'API test failed: ' + (data.error || 'Unknown error') + '\n\nDetails: ' + JSON.stringify(data, null, 2);
                        diagnosticResult.style.backgroundColor = '#ffebee';
                        diagnosticResult.style.borderColor = '#ef9a9a';
                    }
                } catch (error) {
                    diagnosticResult.textContent = `Error testing API: ${error.message}`;
                    diagnosticResult.style.backgroundColor = '#ffebee';
                    diagnosticResult.style.borderColor = '#ef9a9a';
                    console.error('API test error:', error);
                }
            });
        }
        
        if (testConfigBtn) {
            testConfigBtn.addEventListener('click', async function() {
                diagnosticResult.textContent = 'Testing configuration...';
                
                try {
                    // Use relative path exactly as in minimal-chat.html
                    const response = await fetch('/api/test');
                    
                    if (!response.ok) {
                        throw new Error(`Server responded with status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    console.log('Config test response data:', data);
                    
                    const configMessage = `
API Key: ${data.apiKey}
OpenAI Configured: ${data.openaiConfigured}
Environment: ${data.environment}
                    `;
                    
                    diagnosticResult.textContent = configMessage;
                    
                    if (data.apiKey === 'Configured' && data.openaiConfigured) {
                        diagnosticResult.style.backgroundColor = '#e8f5e9';
                        diagnosticResult.style.borderColor = '#66bb6a';
                    } else {
                        diagnosticResult.style.backgroundColor = '#ffebee';
                        diagnosticResult.style.borderColor = '#ef9a9a';
                    }
                } catch (error) {
                    diagnosticResult.textContent = `Error testing config: ${error.message}`;
                    diagnosticResult.style.backgroundColor = '#ffebee';
                    diagnosticResult.style.borderColor = '#ef9a9a';
                    console.error('Config test error:', error);
                }
            });
        }
        
        if (testFetchBtn) {
            testFetchBtn.addEventListener('click', async function() {
                diagnosticResult.textContent = 'Testing direct fetch to OpenAI...';
                
                try {
                    // Use relative path exactly as in minimal-chat.html
                    const response = await fetch('/api/test-openai-fetch');
                    
                    if (!response.ok) {
                        throw new Error(`Server responded with status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    console.log('Direct fetch response data:', data);
                    
                    if (data.status === 'ok') {
                        diagnosticResult.textContent = 'Direct fetch successful! ' + data.message + '\n\nResponse: ' + data.response;
                        diagnosticResult.style.backgroundColor = '#e8f5e9';
                        diagnosticResult.style.borderColor = '#66bb6a';
                    } else {
                        diagnosticResult.textContent = 'Direct fetch failed: ' + (data.error || 'Unknown error');
                        diagnosticResult.style.backgroundColor = '#ffebee';
                        diagnosticResult.style.borderColor = '#ef9a9a';
                    }
                } catch (error) {
                    diagnosticResult.textContent = `Error testing direct fetch: ${error.message}`;
                    diagnosticResult.style.backgroundColor = '#ffebee';
                    diagnosticResult.style.borderColor = '#ef9a9a';
                    console.error('Direct fetch test error:', error);
                }
            });
        }
    });
    </script>
</body>
</html> 